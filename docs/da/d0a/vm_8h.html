<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ruby: include/ruby/vm.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ruby
   &#160;<span id="projectnumber">2.5.0dev(2017-10-22revision60238)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_82434f6a8a39055b35115fc8d4134985.html">ruby</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../da/d0a/vm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aed0ca9a174190c830266460d42bda092"><td class="memItemLeft" align="right" valign="top">typedef typedefRUBY_SYMBOL_EXPORT_BEGIN struct <a class="el" href="../../db/d74/structrb__vm__struct.html">rb_vm_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0a/vm_8h.html#aed0ca9a174190c830266460d42bda092">ruby_vm_t</a></td></tr>
<tr class="separator:aed0ca9a174190c830266460d42bda092"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a64b7830f0ac2f5c4e03c3659051b3e4b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0a/vm_8h.html#a64b7830f0ac2f5c4e03c3659051b3e4b">ruby_vm_destruct</a> (<a class="el" href="../../da/d0a/vm_8h.html#aed0ca9a174190c830266460d42bda092">ruby_vm_t</a> *vm)</td></tr>
<tr class="separator:a64b7830f0ac2f5c4e03c3659051b3e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450d06a010ca9e1139e5ba87c5cb9e38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0a/vm_8h.html#a450d06a010ca9e1139e5ba87c5cb9e38">ruby_vm_at_exit</a> (void(*func)(<a class="el" href="../../da/d0a/vm_8h.html#aed0ca9a174190c830266460d42bda092">ruby_vm_t</a> *))</td></tr>
<tr class="memdesc:a450d06a010ca9e1139e5ba87c5cb9e38"><td class="mdescLeft">&#160;</td><td class="mdescRight">ruby_vm_at_exit registers a function <em>func</em> to be invoked when a VM passed away.  <a href="#a450d06a010ca9e1139e5ba87c5cb9e38">More...</a><br /></td></tr>
<tr class="separator:a450d06a010ca9e1139e5ba87c5cb9e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aed0ca9a174190c830266460d42bda092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed0ca9a174190c830266460d42bda092">&#9670;&nbsp;</a></span>ruby_vm_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef typedefRUBY_SYMBOL_EXPORT_BEGIN struct <a class="el" href="../../db/d74/structrb__vm__struct.html">rb_vm_struct</a> <a class="el" href="../../da/d0a/vm_8h.html#aed0ca9a174190c830266460d42bda092">ruby_vm_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0a/vm_8h_source.html#l00032">32</a> of file <a class="el" href="../../da/d0a/vm_8h_source.html">vm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a450d06a010ca9e1139e5ba87c5cb9e38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450d06a010ca9e1139e5ba87c5cb9e38">&#9670;&nbsp;</a></span>ruby_vm_at_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ruby_vm_at_exit </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="../../da/d0a/vm_8h.html#aed0ca9a174190c830266460d42bda092">ruby_vm_t</a> *)&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ruby_vm_at_exit registers a function <em>func</em> to be invoked when a VM passed away. </p>
<p>Functions registered this way runs in reverse order of registration, just like END {} block does. The difference is its timing to be triggered. ruby_vm_at_exit functions runs when a VM <em>passed</em> <em>away</em>, while END {} blocks runs just <em>before</em> a VM <em>is</em> <em>passing</em> <em>away</em>.</p>
<p>You cannot register a function to another VM than where you are in. So where to register is intuitive, omitted. OTOH the argument <em>func</em> cannot know which VM it is in because at the time of invocation, the VM has already died and there is no execution context. The VM itself is passed as the first argument to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">func</td><td>the function to register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a64b7830f0ac2f5c4e03c3659051b3e4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64b7830f0ac2f5c4e03c3659051b3e4b">&#9670;&nbsp;</a></span>ruby_vm_destruct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ruby_vm_destruct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d0a/vm_8h.html#aed0ca9a174190c830266460d42bda092">ruby_vm_t</a> *&#160;</td>
          <td class="paramname"><em>vm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
